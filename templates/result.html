<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Vibe Stylist - Result</title>
</head>
<body>
  <h1>Campus Style Analysis</h1>
  <h2>Your Color Profile</h2>
  <p><strong>Skin Tone Bucket:</strong> {{ profile.skin_tone_bucket }}</p>
  <p><strong>Undertone:</strong> {{ profile.undertone }} (confidence: {{ profile.confidence.undertone }})</p>
  <p><strong>Contrast:</strong> {{ profile.contrast }} (confidence: {{ profile.confidence.contrast }})</p>
  <p><strong>LAB Mean:</strong> L={{ profile.skin_lab.L }}, A={{ profile.skin_lab.A }}, B={{ profile.skin_lab.B }}</p>
  <p><strong>Extraction:</strong> {{ profile.diagnostics.extraction_method }} | Face detected: {{ profile.diagnostics.face_detected }}</p>
  {% if profile.diagnostics.quality_flags %}
  <p><strong>Quality Flags:</strong> {{ profile.diagnostics.quality_flags|join(", ") }}</p>
  {% endif %}

  <h2>User Context</h2>
  <p><strong>Segment:</strong> {{ context.user_segment or "not_provided" }}</p>
  <p><strong>Gender:</strong> {{ context.gender or "not_provided" }}</p>
  <p><strong>Mood:</strong> {{ context.mood or "not_provided" }}</p>
  <p><strong>Occasion:</strong> {{ context.occasion or "not_provided" }}</p>
  <p><strong>Campus Style:</strong> {{ context.campus_style or "not_provided" }}</p>
  <p><strong>Budget Tier:</strong> {{ context.budget_tier or "not_provided" }}</p>
  <p><strong>Student Year:</strong> {{ context.student_year or "not_provided" }}</p>
  <p><strong>Season:</strong> {{ context.season or "not_provided" }}</p>

  <h2>Recommended Palettes</h2>
  <p>{{ palettes.summary }}</p>

  {% for palette in palettes.palettes %}
    <h3>{{ loop.index }}. {{ palette.name }}</h3>
    <p>Primary: {{ palette.primary }} ({{ palette.hex.primary }})</p>
    <p>Secondary: {{ palette.secondary }} ({{ palette.hex.secondary }})</p>
    <p>Accent: {{ palette.accent }} ({{ palette.hex.accent }})</p>
    <p><strong>Campus Fit:</strong> {{ palette.campus_fit }}</p>
    <p><strong>Budget Tip:</strong> {{ palette.affordability_tip }}</p>
    <p>{{ palette.why_it_works }}</p>
  {% endfor %}

  {% if palettes.styling_notes %}
    <h3>Styling Notes</h3>
    <ul>
      {% for note in palettes.styling_notes %}
      <li>{{ note }}</li>
      {% endfor %}
    </ul>
  {% endif %}

  <h2>Gender-Specific Style Guidance</h2>
  {% if style_guidance %}
    <p><strong>Alignment:</strong> {{ style_guidance.gender_alignment_note }}</p>

    <h3>Dress Codes</h3>
    {% for code in style_guidance.dress_codes %}
      <p><strong>{{ code.code | capitalize }}</strong></p>
      <p>Top: {{ code.top }}</p>
      <p>Bottom: {{ code.bottom }}</p>
      <p>Shoes: {{ code.shoes }}</p>
      <p>{{ code.why }}</p>
    {% endfor %}

    <h3>Hairstyle</h3>
    <p>{{ style_guidance.hairstyle.recommendation }}</p>
    <p><strong>Maintenance:</strong> {{ style_guidance.hairstyle.maintenance_tip }}</p>

    <h3>Accessories</h3>
    <ul>
      {% for item in style_guidance.accessories %}
      <li>{{ item }}</li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No style guidance available.</p>
  {% endif %}

  <h2>Curated Shopping Links</h2>
  {% if shopping_links %}
    <p>{{ shopping_links.note }}</p>
    {% for category, items in shopping_links.categories.items() %}
      <h3>{{ category | capitalize }}</h3>
      <ul>
        {% for item in items %}
        <li>
          <strong>{{ item.retailer }}:</strong>
          <a href="{{ item.url }}" target="_blank" rel="noopener noreferrer">{{ item.label }}</a>
        </li>
        {% endfor %}
      </ul>
    {% endfor %}
  {% else %}
    <p>No shopping links available.</p>
  {% endif %}

  <a href="/">Go Back</a>
</body>
</html>
